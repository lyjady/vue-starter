<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>品牌案例</title>
    <link rel="stylesheet" href="css/bootstrap-3.3.7.css">
    <script src="js/vue.js"></script>
</head>
<body>
    <div id="app">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">添加手机</h3>
            </div>
            <div class="panel-body form-inline">
                <label>
                    Id:
                    <input type="text" v-model="id">
                </label>
                <label>
                    Name:
                    <input type="text" v-model="name">
                </label>
                <input type="button" class="btn btn-primary" @click="add" value="添加">
            </div>
        </div>
        <table class="table table-hover table-bordered table-striped">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Time</th>
                    <th>Operation</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(phone, index) in phoneList" :key="phone.id">
                    <td>{{ phone.id }}</td>
                    <td>{{ phone.name }}</td>
                    <td>{{ phone.time }}</td>
                    <td>
                        <a href="javascript:void(0)" @click.prevent="del(phone.id)">删除</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        const app = new Vue({
           el: '#app',
           data: {
               id: '',
               name: '',
               phoneList: [
                   {id: 1, name: "iPhone Xs", time: new Date().toLocaleString()},
                   {id: 2, name: "iPhone Xs Max", time: new Date().toLocaleString()},
                   {id: 3, name: "iPhone 11 Pro", time: new Date().toLocaleString()},
               ]
           },
            methods: {
               add() {
                   if (this.id != null && this.id !== '' && this.name !== '' && this.name != null) {
                       const phone = {id: this.id, name: this.name, time: new Date().toLocaleString()};
                       this.phoneList.push(phone);
                       this.id = this.name = '';
                   } else {
                       console.log("id和name不能为空");
                   }
               },
                del(id) {
                    console.log(id);
                    //根据索引删除
                    //this.phoneList.splice(index, 1);

                    //some方法删除
                    // this.phoneList.some((phone, index) => {
                    //     if (phone.id === id) {
                    //         this.phoneList.splice(index, 1);
                    //         return true;
                    //     }
                    // });

                    //findIndex方法删除
                    const index = this.phoneList.findIndex((phone => {
                        if (phone.id === id) {
                            return true;
                        }
                    }));
                    this.phoneList.splice(index, 1);
                }
            }
        });
    </script>
</body>
</html>